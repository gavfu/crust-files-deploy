(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{97494:function(e,t,n){"use strict";var r=n(67294),a=n(29163),o=n(85893);t.Z=r.memo((0,a.ZP)((function(e){var t=e.src,n=void 0===t?"/images/logo_22x.png":t,r=e.className;return(0,o.jsx)("div",{className:r,children:(0,o.jsx)("img",{src:n})})})).withConfig({displayName:"Logo",componentId:"sc-lchex5-0"})(["display:inline-block;img{display:inline-block;height:2.5rem;width:auto;object-fit:contain;}span{font-size:2.45rem;font-weight:400;line-height:2.45rem;color:white;display:inline-block;}"]))},60649:function(e,t,n){"use strict";var r=n(94184),a=n.n(r),o=n(96486),i=n.n(o),s=n(11163),c=n(67294),l=n(76736),u=n(35766),m=n(14309),d=n(94983),f=n(29163),p=n(97494),h=n(85893),g=[{path:"/home",icon:"cru-fo-home",name:"Home"},{icon:"cru-fo-file",isParent:!0,name:"My Files"},{path:"/files",name:"Public"},{path:"/files/vault",name:"Vault"},{path:"/setting",icon:"cru-fo-settings",name:"Settings"},{path:"/share-earn",icon:"cru-fo-share-2",name:"Share-and-Earn"},{path:"/user",icon:"cru-fo-user",name:"Premium User"},{path:"/twitter-poc",icon:"cru-fo-twitter",name:"Twitter POC"}];var b="15.7rem";t.Z=c.memo((0,f.ZP)((function(e){var t=(0,s.useRouter)(),n=(0,c.useCallback)((function(n,r){var a=r.index,o=g[a];o.path&&o.path!==e.path&&t.push(o.path)}),[e.path]),r=(0,c.useMemo)((function(){return i().findIndex(g,(function(e){return"/share-earn"===e.path}))}),[]),o=function(t){return e.path===t.path};return(0,h.jsxs)(l.Z.Pushable,{as:u.Z,className:a()(e.className,"basic"),children:[(0,h.jsxs)(l.Z,{as:u.Z,animation:"push",direction:"left",visible:!0,className:"basic",children:[(0,h.jsxs)(m.Z,{textAlign:"center",children:[(0,h.jsx)(m.Z.Row,{columns:1,className:"logoPanel",children:(0,h.jsx)(p.Z,{src:"/images/logo_12x.png"})}),(0,h.jsx)(m.Z.Row,{columns:1,children:(0,h.jsx)(d.Z,{fluid:!0,vertical:!0,borderless:!0,children:g.map((function(t,r){var a,i;return(0,h.jsx)(d.Z.Item,{className:(i=t,e.path.startsWith(i.path)&&i.isParent?"active2":""),position:"left",index:r,active:o(t),icon:(0,h.jsx)("span",{className:null!==(a=t.icon)&&void 0!==a?a:"cru-fo-file",style:{opacity:t.icon?1:0}}),name:t.name,onClick:n},"side_menu_".concat(r))}))})})]}),(0,h.jsx)("div",{className:"flex1"}),(0,h.jsx)("img",{className:"share_earn",onClick:function(){return n({},{index:r})},src:"/images/share_earn.png"})]}),(0,h.jsx)(l.Z.Pusher,{children:e.children})]})})).withConfig({displayName:"SideLayout",componentId:"sc-a6jhx7-0"})(["height:100vh;background:white;overflow-y:auto;.ui.sidebar{padding:unset !important;background:#F5F5F5;box-shadow:unset !important;width:",";min-height:821px;display:flex;flex-direction:column;align-items:center;.ui.grid{margin:unset !important;width:100%;}.logoPanel{padding:4.7rem 0;img{height:1.7rem;}}.menu{box-shadow:unset !important;border:unset !important;border-radius:unset !important;background:unset !important;.item{border-radius:0 !important;text-align:left;padding-left:2rem !important;font-weight:500;font-size:1.3rem;color:var(--secend-color);font-family:OpenSans-Regular;&.active{position:relative;color:var(--main-color);border-right:solid 0.2rem var(--primary-color);}&.active2{color:var(--main-color);border-right:unset;background-color:transparent;}span{float:left;margin-right:10px;}}}.share_earn{cursor:pointer;width:15rem;height:auto;margin-bottom:1rem;}}.pusher{width:calc(100vw - ",");height:100vh;min-height:821px;transform:translate3d(",",0,0) !important;overflow:auto !important;background:white;}"],b,b,b))},17082:function(e,t,n){"use strict";n.d(t,{vZ:function(){return g},hC:function(){return b},MH:function(){return v}});var r=n(92809),a=n(30266),o=n(80318),i=n(809),s=n.n(i),c=n(67294),l=n(58971),u=n.n(l),m=n(65058);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=n(21994).Cypher,h=new p(8),g=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){r.result&&t(r.result)},r.onerror=n,r.readAsArrayBuffer(e)}))};function b(e){try{var t=e&&e.trim();if(t){var n=t.split(" ");if(1===n.length&&n[0]){var r=n[0],a=window.atob(r),o=h.phraseFromSecret(a);if(o&&o.split(" ").length>=4)return{secret:r,seeds:o}}else if(n.length>=4){var i=h.secretFromPhrase(t);if(i&&i.split("-").length>=4)return{secret:window.btoa(i),seeds:t}}}return null}catch(s){return null}}function v(){var e=(0,c.useState)({}),t=e[0],n=e[1],r=(0,m.O)(),i=(0,o.Z)(r,2),l=i[0],d=i[1];(0,c.useEffect)((function(){var e=u().get("user:crypto");e&&n(e),d(!0)}),[]);var h=(0,c.useCallback)((function(e){n(e),u().set("user:crypto",e)}),[]),g=(0,c.useCallback)((0,a.Z)(s().mark((function e(){var t,n,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new p(8),n=t.genMnemonics(),r=n.secret,a=n.mnemonics,o={secret:window.btoa(r),seeds:a},console.info("length:",r.length,o.secret.length),h(o),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),[]);return(0,c.useMemo)((function(){return f(f({},t),{},{generate:g,set:h,init:l})}),[t,h,l,g])}},20478:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(67294),a=n(12752),o=n(20640),i=n.n(o);function s(){var e=(0,r.useContext)(a.Il).alert;return(0,r.useCallback)((function(t){i()(t),e.alert({msg:"Copied",type:"success"})}),[e])}},8130:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(83789),a=n(80318),o=n(94184),i=n.n(o),s=n(93162),c=n.n(s),l=n(11163),u=n(67294),m=n(23499),d=n(35766),f=n(21004),p=n(49147),h=n(27416),g=n(29163),b=n(60954),v=n(92809),x=n(10219),y=n(345),j=n(60416),w=n(17082),N=n(85893),k=["alert","onSuccess","toggleOpen"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=u.memo((0,g.ZP)((function(e){var t=e.alert,n=e.onSuccess,r=e.toggleOpen,a=(0,x.Z)(e,k),o=(0,u.useState)(""),i=o[0],s=o[1],c=(0,u.useCallback)((function(e,t){var n=t.value;s(n)}),[]),l=(0,u.useCallback)((function(){var e=(0,w.hC)(i);e?(n(e),r(!1)):t.error("Please check input value")}),[i,t]),m=(0,u.useCallback)((function(){s(""),r(!1)}),[]);return(0,N.jsxs)(y.Z,O(O({closeIcon:(0,N.jsx)("span",{className:"close icon cru-fo-x"}),onClose:m},a),{},{children:[(0,N.jsx)(y.Z.Header,{content:"Input a new key"}),(0,N.jsxs)(y.Z.Content,{children:[(0,N.jsx)(j.Z,{fluid:!0,onChange:c}),(0,N.jsxs)("div",{className:"btns",children:[(0,N.jsx)(b.Z,{content:"Input",onClick:l}),(0,N.jsx)(b.Z,{content:"Cancel",onClick:function(){return r(!1)}})]})]})]}))})).withConfig({displayName:"ModalNewKey",componentId:"sc-1ramix5-0"})(["width:34.3rem !important;.header{height:3.93rem;font-size:1.3rem !important;padding:0 1.14rem !important;font-weight:600 !important;line-height:3.93rem !important;}.close.icon{top:0.5rem;right:0.6rem;color:#666666;}.content{padding:1rem !important;input{border:0.07rem solid #CCCCCC !important;border-radius:0.57rem !important;}.btns{padding-top:2.3rem;button{width:calc(50% - 0.5rem) !important;margin:unset;}button:first-child{margin-right:1rem;}}}"])),P=n(60649),S=n(18988),E=n(12752),_=n(20478),I=n(65058),F=n(96705);function M(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,o=e})),f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W={crust:"Crust Wallet",metamask:"MetaMask","metamask-Polygon":"MetaMask","metamask-Moonriver":"MetaMask","polkadot-js":"Polkadot Extension",near:"Near Wallet",elrond:"Elrond(Maiar Wallet)",flow:"Flow Wallet",solana:"Solana(Phantom Wallet)","wallet-connect":"WalletConnect"};var D=u.memo((0,g.ZP)((function(e){var t=e.className,n=(0,m.$)().t,o=(0,w.MH)(),s=(0,l.useRouter)(),g=(0,u.useContext)(E.Il).alert,v=(0,I.O)(!1),x=(0,a.Z)(v,2),y=x[0],j=x[1],k=(0,I.O)(),C=(0,a.Z)(k,2),O=C[0],A=C[1],D=(0,_.V)(),T=(0,F.WY)(),R=(0,u.useMemo)((function(){return T.member&&1===T.member.member_state?"Premium":"Trial"}),[T]),z="crust"===T.wallet,H=(0,F.Yg)(),U=(0,u.useRef)(null),L=(0,u.useCallback)((function(){U.current&&U.current.click()}),[U]),Y=(0,u.useCallback)((function(e){try{var t=new FileReader,a=e.target.files;if(!a)return;if(t.readAsText(a[0],"UTF-8"),!/(.json)$/i.test(e.target.value))return g.error(n("File error"));t.onload=function(e){var t,a=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result),i={files:[]};if(Array.isArray(a))i.files=a;else{if(!a.files||!Array.isArray(a.files))return g.error(n("File content error"));i.secret=a.secret,i.files=a.files}if(o.secret&&i.secret&&i.secret!==o.secret)return g.error("Two secrets were found, and they are different.");if(i.secret){var s=(0,w.hC)(i.secret);s&&o.set(s)}var c,l=[],u={},m=M(i.files);try{for(m.s();!(c=m.n()).done;){var d=c.value;d.Hash&&d.Name&&d.UpEndpoint&&d.PinEndpoint&&(l.push(d),u[d.Hash]=!0)}}catch(p){m.e(p)}finally{m.f()}var f=H.files.filter((function(e){return!u[e.Hash]}));H.setFiles([].concat(l,(0,r.Z)(f))),g.alert({msg:n("Import Success"),type:"success"})}}catch(e){g.alert({msg:n("File content error"),type:"error"})}}),[H,o.set,g,n]),K=(0,u.useCallback)((function(){var e={files:H.files,secret:o.secret},t=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});c().saveAs(t,"backup.json")}),[H,o]);return(0,N.jsx)(P.Z,{path:"/setting",children:(0,N.jsxs)(d.Z,{basic:!0,className:t,children:[(0,N.jsx)("input",{onChange:Y,ref:U,style:{display:"none"},type:"file"}),(0,N.jsx)(S.Z,{}),y&&(0,N.jsx)(Z,{alert:g,size:"tiny",open:!0,toggleOpen:j,onSuccess:o.set}),(0,N.jsxs)(d.Z,{basic:!0,className:"mcontent",children:[(0,N.jsxs)(d.Z,{basic:!0,className:"mcard",children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:n("User Profile")}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(n("Web3 Identity Logged-in:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:T.account})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(n("Logged-in Wallet:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:W[T.wallet]})]}),z&&T.nickName&&(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(n("Nick Name:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:T.nickName})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(n("User Type:")," "),z&&(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:R}),!z&&(0,N.jsx)("a",{onClick:function(){return s.push("/user")},rel:"noreferrer",children:"Get a Premium"})]})]}),(0,N.jsxs)(d.Z,{basic:!0,className:"mcard",children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:n("User Data Management")}),(0,N.jsx)("div",{className:"text font-sans-regular",children:"".concat(n("Your user data (including three File Lists and one File Encryption Key) are cached on your local devices. If you want to migrate your user data to a new device, use Export & Import function.")," ")}),(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(p.Z,{active:O,onClick:function(){return A()},children:(0,N.jsxs)("div",{className:"title font-sans-semibold",children:[n("File Encryption"),(0,N.jsx)("span",{className:i()("icon",O?"cru-fo-chevron-up":"cru-fo-chevron-down")})]})}),(0,N.jsxs)(h.Z,{active:O,className:"no-padding",children:[(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(n("Your File Encryption Key:")," "),o.secret&&(0,N.jsxs)("span",{className:"bold-text font-sans-semibold",children:[o.secret,(0,N.jsx)("span",{className:"icon cru-fo-copy",onClick:function(){return D(o.secret)}})]}),!o.secret&&(0,N.jsx)("a",{onClick:o.generate,children:"Generate a New"})]}),o.seeds&&(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(n("Seed Phrase:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:o.seeds})]})]})]}),(0,N.jsxs)("div",{className:"btns",children:[(0,N.jsx)(b.Z,{content:n("Export"),onClick:K}),(0,N.jsx)(b.Z,{content:n("Import"),onClick:L})]})]})]})]})})})).withConfig({displayName:"setting",componentId:"sc-1rkrrxr-0"})(["padding:unset !important;.mcontent{margin:unset !important;padding:0 0 3rem 0 !important;overflow:auto;}.mcard{padding:1.71rem !important;box-shadow:0 0.71rem 1.71rem 0 rgba(0,0,0,0.06) !important;border-radius:1.14rem !important;border:0.07rem solid #EEEEEE !important;margin:2.21rem 2.29rem 0 2.39rem !important;.title{font-size:1.3rem !important;font-weight:600;color:var(--main-color);padding-bottom:1.14rem;.cru-fo{margin-right:0.8rem;}}.text{font-size:1rem;color:var(--secend-color);line-height:1.57rem;}.icon{margin-left:1rem;font-size:1.428571rem;position:relative;top:3px;cursor:pointer;}.bold-text{color:var(--main-color);}a{text-decoration:underline;line-height:1.2rem;cursor:pointer;}.btns{margin-top:1.7rem;button:first-child{margin-right:1rem;}}}"]))},63782:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return n(8130)}])}},function(e){e.O(0,[794,615,545,774,888,179],(function(){return t=63782,e(e.s=t);var t}));var t=e.O();_N_E=t}]);