(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{97494:function(e,t,n){"use strict";var i=n(67294),r=n(29163),a=n(85893);t.Z=i.memo((0,r.ZP)((function(e){var t=e.src,n=void 0===t?"/images/logo_22x.png":t,i=e.className;return(0,a.jsx)("div",{className:i,children:(0,a.jsx)("img",{src:n})})})).withConfig({displayName:"Logo",componentId:"sc-lchex5-0"})(["display:inline-block;img{display:inline-block;height:2.5rem;width:auto;object-fit:contain;}span{font-size:2.45rem;font-weight:400;line-height:2.45rem;color:white;display:inline-block;}"]))},8670:function(e,t,n){"use strict";n.d(t,{o:function(){return c}});var i=n(67294),r=n(29163),a=n(94184),s=n.n(a),o=n(85893);var c=i.memo((0,r.ZP)((function(e){var t=e.className,n=e.children;return(0,o.jsx)("div",{className:s()(t,"mcard"),children:n})})).withConfig({displayName:"MCard",componentId:"sc-157sg53-0"})(["padding:1.71rem !important;box-shadow:0 0.71rem 1.71rem 0 rgba(0,0,0,0.06) !important;border-radius:1.14rem !important;border:0.07rem solid #EEEEEE !important;margin:2.21rem 2.29rem 0 2.39rem !important;.title{font-size:1.3rem !important;font-weight:600;color:var(--main-color);padding-bottom:1.14rem;.cru-fo{margin-right:0.8rem;}}.text{font-size:1rem;color:var(--secend-color);line-height:1.57rem;}.icon{margin-left:1rem;font-size:1.428571rem;position:relative;top:3px;cursor:pointer;}.bold-text{color:var(--main-color);}a{text-decoration:underline;line-height:1.2rem;cursor:pointer;}.btns{margin-top:1.7rem;button:first-child{margin-right:1rem;}}"]))},60649:function(e,t,n){"use strict";var i=n(94184),r=n.n(i),a=n(96486),s=n.n(a),o=n(11163),c=n(67294),l=n(76736),m=n(35766),d=n(14309),u=n(94983),p=n(29163),h=n(97494),f=n(85893),g=[{path:"/home",icon:"cru-fo-home",name:"Home"},{icon:"cru-fo-file",isParent:!0,name:"My Files"},{path:"/files",name:"Public"},{path:"/files/vault",name:"Vault"},{path:"/setting",icon:"cru-fo-settings",name:"Settings"},{path:"/share-earn",icon:"cru-fo-share-2",name:"Share-and-Earn"},{path:"/user",icon:"cru-fo-user",name:"Premium User"}];var x="15.7rem";t.Z=c.memo((0,p.ZP)((function(e){var t=(0,o.useRouter)(),n=(0,c.useCallback)((function(n,i){var r=i.index,a=g[r];a.path&&a.path!==e.path&&t.push(a.path)}),[e.path]),i=(0,c.useMemo)((function(){return s().findIndex(g,(function(e){return"/share-earn"===e.path}))}),[]),a=function(t){return e.path===t.path};return(0,f.jsxs)(l.Z.Pushable,{as:m.Z,className:r()(e.className,"basic"),children:[(0,f.jsxs)(l.Z,{as:m.Z,animation:"push",direction:"left",visible:!0,className:"basic",children:[(0,f.jsxs)(d.Z,{textAlign:"center",children:[(0,f.jsx)(d.Z.Row,{columns:1,className:"logoPanel",children:(0,f.jsx)(h.Z,{src:"/images/logo_12x.png"})}),(0,f.jsx)(d.Z.Row,{columns:1,children:(0,f.jsx)(u.Z,{fluid:!0,vertical:!0,borderless:!0,children:g.map((function(t,i){var r,s;return(0,f.jsx)(u.Z.Item,{className:(s=t,e.path.startsWith(s.path)&&s.isParent?"active2":""),position:"left",index:i,active:a(t),icon:(0,f.jsx)("span",{className:null!==(r=t.icon)&&void 0!==r?r:"cru-fo-file",style:{opacity:t.icon?1:0}}),name:t.name,onClick:n},"side_menu_".concat(i))}))})})]}),(0,f.jsx)("div",{className:"flex1"}),(0,f.jsx)("img",{className:"share_earn",onClick:function(){return n({},{index:i})},src:"/images/share_earn.png"})]}),(0,f.jsx)(l.Z.Pusher,{children:e.children})]})})).withConfig({displayName:"SideLayout",componentId:"sc-a6jhx7-0"})(["height:100vh;background:white;overflow-y:auto;.ui.sidebar{padding:unset !important;background:#F5F5F5;box-shadow:unset !important;width:",";min-height:821px;display:flex;flex-direction:column;align-items:center;.ui.grid{margin:unset !important;width:100%;}.logoPanel{padding:4.7rem 0;img{height:1.7rem;}}.menu{box-shadow:unset !important;border:unset !important;border-radius:unset !important;background:unset !important;.item{border-radius:0 !important;text-align:left;padding-left:2rem !important;font-weight:500;font-size:1.3rem;color:var(--secend-color);font-family:OpenSans-Regular;&.active{position:relative;color:var(--main-color);border-right:solid 0.2rem var(--primary-color);}&.active2{color:var(--main-color);border-right:unset;background-color:transparent;}span{float:left;margin-right:10px;}}}.share_earn{cursor:pointer;width:15rem;height:auto;margin-bottom:1rem;}}.pusher{width:calc(100vw - ",");height:100vh;min-height:821px;transform:translate3d(",",0,0) !important;overflow:auto !important;background:white;}"],x,x,x))},76435:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var i=n(80318),r=n(11384),a=n(96486),s=n.n(a),o=n(67294),c=n(35766),l=n(29163),m=n(60954),d=n(8670),u=n(60649),p=n(18988),h=n(75282),f=n(92809),g=n(12752),x=n(96705);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=n(34111),w=n(13711),N=n(45129),y=n(99056),k=n(85893);var P=o.memo((0,l.ZP)((function(e){var t=e.className,n=(0,x.WY)(),a=(0,w.S)(),l=a.isCrust,f=a.isPremiumUser,v=a.deposit,P=a.doGetDeposit,S=a.hasDeposit,O=(0,o.useState)(),_=O[0],C=O[1],E=(0,o.useState)(),Z=E[0],R=E[1],z=(0,o.useMemo)((function(){return s().debounce((function(e){var t=e.target.value;C(""),R(""),t&&(0,N.lK)(t).then((function(e){e!==n.account?R(e):C("It can't be your own")})).catch((function(){return C("Not found")}))}),300)}),[n.account]),D=(0,o.useState)(),M=D[0],U=D[1],F=(0,j.X)((function(){return(0,N.w2)()})),I=(0,i.Z)(F,1)[0],W=l&&!S,Y=l&&S,L=(0,j.X)((function(){return(0,N.Pk)()})),A=(0,i.Z)(L,1)[0],B=(0,o.useMemo)((function(){return(0,y.zw)(M)}),[M]),T=(0,o.useMemo)((function(){return(new Date).getTime()}),[]),X=(0,o.useMemo)((function(){return S?v.deposit.expire_timestamp>T?(0,y.vr)(v.deposit.claim_amount):(0,y.vr)(v.deposit.deposit_amount):"-"}),[S,T]),G=(0,o.useMemo)((function(){return(0,y.zw)((null===I||void 0===I?void 0:I.guaranteeAmount)||"")}),[I]),H=(0,o.useMemo)((function(){return(0,y.zw)((null===I||void 0===I?void 0:I.guaranteeDiscountWithReferer)||"")}),[I]),q=(0,o.useMemo)((function(){if(!I||!Y)return"-";var e=new Number(I.guaranteePeriod).valueOf();return Math.round(e/60/60/24)}),[Y,I]),J=(0,o.useMemo)((function(){return S?(0,r.Z)(1e3*v.deposit.expire_timestamp,"yyyy-MM-dd"):"--:--:--"}),[S]);(0,o.useEffect)((function(){I&&U(Z?I.guaranteeDiscountWithReferer:I.guaranteeAmount)}),[I,Z]);var K=function(e,t,n){var i=(0,g.qD)(),r=i.api,a=i.alert,s=i.loading,c=(0,x.WY)(),l=(0,o.useState)(!1),m=l[0],d=l[1],u=(0,o.useState)(!1),p=u[0],f=u[1];return(0,o.useEffect)((function(){d(!1),c.account&&"crust"===c.wallet&&e&&t&&r&&c.crust.wallet&&d(!0)}),[r,c,e,t]),{start:function(){if(m){f(!1),s.show();var i=b(b({},c.crust.wallet.signer),{},{signPayload:function(e){return c.crust.wallet.signer.signPayload(e)}});r.setSigner(i);var o=t;console.info("deposit:",e,t,o);var l=r.tx.balances.transfer(e,o),d=r.tx.system.remark(JSON.stringify({scope:"crustFiles",env:h.g6,action:"deposit",share_from:n}));r.tx.utility.batchAll([l,d]).signAndSend(c.account,{nonce:-1,tip:0},(function(e){r.setSigner(void 0),e.status.isFinalized&&(s.hide(),f(!0))})).catch((function(e){"string"===typeof e?a.error(e):console.error(e),s.hide()}))}},ready:m,finish:p}}(A,M,Z),V=function(){var e=(0,g.qD)(),t=e.api,n=e.alert,i=e.loading,r=(0,x.WY)(),a=(0,o.useState)(!1),s=a[0],c=a[1],l=(0,o.useState)(!1),m=l[0],d=l[1];return(0,o.useEffect)((function(){c(!1),r.account&&"crust"===r.wallet&&t&&r.crust.wallet&&c(!0)}),[t,r]),{start:function(){if(s){i.show(),d(!1);var e=b(b({},r.crust.wallet.signer),{},{signPayload:function(e){return r.crust.wallet.signer.signPayload(e)}});t.setSigner(e),t.tx.system.remark(JSON.stringify({scope:"crustFiles",env:h.g6,action:"claimDeposit"})).signAndSend(r.account,{nonce:-1,tip:0},(function(e){t.setSigner(void 0),e.status.isFinalized&&(i.hide(),d(!0))})).catch((function(e){"string"===typeof e?n.error(e):console.error(e),i.hide()}))}},ready:s,finish:m}}();(0,o.useEffect)((function(){var e;if(K.finish||V.finish){var t=3;e=setInterval((function(){t<=0?clearInterval(e):(t-=1,P())}),5e3)}return function(){return e&&clearInterval(e)}}),[K.finish,V.finish]);var Q=K.finish||v&&v.depositOngoing,$=!K.ready||!M||Q,ee=V.finish||v&&v.claimOngoing,te=!V.ready||ee||S&&v.deposit.expire_timestamp>=T;return(0,k.jsx)(u.Z,{path:"/user",children:(0,k.jsxs)(c.Z,{basic:!0,className:t,children:[(0,k.jsx)(p.Z,{}),(0,k.jsxs)(c.Z,{basic:!0,className:"mcontent",children:[(0,k.jsxs)("div",{className:"user-Info",children:[(0,k.jsx)("div",{className:"title",children:f?"You are Premium User":"You are Trial User"}),(0,k.jsxs)("div",{className:"sub-text",children:["Web3 Identity Logged-in\uff1a",(0,k.jsx)("span",{children:n.account})]})]}),(0,k.jsxs)("div",{className:"user-premium-panel",children:[(0,k.jsx)("div",{className:"title",children:"Why Premium?"}),(0,k.jsxs)("div",{className:"permium-trial",children:[(0,k.jsxs)("div",{className:"mtable premium",children:[(0,k.jsx)("div",{className:"t-title",children:"Premium User"}),(0,k.jsxs)("div",{className:"t-item",children:["End-2-end File Encryption",(0,k.jsx)("img",{className:"icon",src:"/images/icon_hook.png"})]}),(0,k.jsxs)("div",{className:"t-item",children:["Maximum Upload Size=",(0,k.jsx)("span",{children:"1GB"})]}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Renew"})," On-chain Storage Order & Place ",(0,k.jsx)("span",{children:"\u201cPermanent Storage Order\u201d"})]}),(0,k.jsx)("div",{className:"t-item",children:"More Space"}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Claim Rewards"})," from \u201cShare-and-Earn\u201d"]}),(0,k.jsxs)("div",{className:"t-item",children:["Priority access to ",(0,k.jsx)("span",{children:"future airdrops"})," and other exclusive benefits"]})]}),(0,k.jsxs)("div",{className:"mtable trial",children:[(0,k.jsx)("div",{className:"t-title",children:"Trial User"}),(0,k.jsxs)("div",{className:"t-item",children:["End-2-end File Encryption",(0,k.jsx)("img",{className:"icon",src:"/images/icon_fork.png"})]}),(0,k.jsxs)("div",{className:"t-item",children:["Maximum Upload Size=",(0,k.jsx)("span",{children:"40MB"})]}),(0,k.jsxs)("div",{className:"t-item",children:["Storage Order Expires in ",(0,k.jsx)("span",{children:"6 Months"})]}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Limited"})," Space"]}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Cannot"})," Claim Rewards from \u201cShare-and-Earn\u201d"]}),(0,k.jsxs)("div",{className:"t-item",children:[(0,k.jsx)("span",{children:"Limited"})," access to future airdrops or other exclusive benefits"]})]})]})]}),!l&&(0,k.jsxs)(d.o,{children:[(0,k.jsx)("div",{className:"title font-sans-semibold",children:"How to get a Premium"}),(0,k.jsx)("div",{className:"text font-sans-regular",children:"Log in with Crust Wallet and Deposit CRU to get a Premium. "}),(0,k.jsx)("div",{className:"btns mbtns",children:(0,k.jsx)(m.Z,{content:"Download Crust Wallet",onClick:function(){return window.open(h.up,"_blank")}})})]}),W&&(0,k.jsxs)(d.o,{children:[(0,k.jsx)("div",{className:"title font-sans-semibold",children:"Get a Premium"}),(0,k.jsxs)("div",{className:"text font-sans-regular",children:["Deposit ",(0,k.jsxs)("span",{className:"origin",children:[5," CRU"]}),(0,k.jsxs)("span",{className:"reffer",children:["(now ",G," CRU for New Year Discount!)"]})," to become a Premium User. ",(0,k.jsx)("br",{}),"Deposit ",(0,k.jsxs)("span",{className:"origin",children:[4," CRU"]}),(0,k.jsxs)("span",{className:"reffer",children:["(now ",H," CRU for New Year Discount!)"]})," if you have an invitation code (the Nickname of your inviter).",(0,k.jsx)("br",{}),"The deposit can be redeemed after ",q," days from your deposit."]}),(0,k.jsxs)("div",{className:"btns mbtns",children:[(0,k.jsx)("input",{className:"input-Nickname",placeholder:"Enter Invitoe\u2019s Nickname\uff08Leave blank if you have no invitor.\uff09",onChange:z}),(0,k.jsx)("span",{className:"input-NickError",children:_}),(0,k.jsx)("br",{}),(0,k.jsx)(m.Z,{content:Q?"Please wait for transaction finalization\u2026":"Deposit ".concat(B," CRU"),disabled:$,onClick:function(){K.start()}}),(0,k.jsx)("a",{href:"/docs/CrustFiles_Users",target:"_blank",children:"How to deposit?"})]})]}),Y&&(0,k.jsxs)(d.o,{children:[(0,k.jsx)("div",{className:"title font-sans-semibold",children:"Redeem Your Deposit"}),(0,k.jsxs)("div",{className:"text font-sans-regular",children:["You can redeem your deposit after ",q," days (est. on ",(0,k.jsx)("span",{className:"font-sans-semibold",style:{color:"#333333"},children:J}),") after your initial deposit."]}),(0,k.jsxs)("div",{className:"btns mbtns",children:[(0,k.jsx)(m.Z,{content:ee?"Ongoing Redeem...":"Redeem ".concat(X," CRU"),disabled:te,onClick:function(){V.start()}}),(0,k.jsx)("a",{href:"/docs/CrustFiles_Users",target:"_blank",children:"Learn more about Redeem Rules."})]}),ee&&(0,k.jsx)("div",{className:"tip",children:"Redeem will be done in less than 24 hours. Check your balance later."})]})]})]})})})).withConfig({displayName:"user",componentId:"sc-538gkd-0"})(["padding:unset !important;.mcontent{margin:unset !important;padding:0 0 3rem 0 !important;overflow:auto;}.mcard{a{font-size:10px;text-decoration:underline;color:#999999;margin-left:9px;}.mbtns{button{min-width:27rem;}}.tip{margin-top:1rem;line-height:20px;color:#999999;}.text > .origin{color:var(--main-color);font-family:'OpenSans-SemiBold';text-decoration:line-through;}.text > .reffer{margin-left:6px;color:var(--primary-color);}}.user-Info{margin:2.21rem 2.29rem 0 2.39rem !important;.title{margin-bottom:8px;font-size:24px;font-family:OpenSans-SemiBold;line-height:33px;}.sub-text{font-size:14px;line-height:22px;color:var(--secend-color);span{color:var(--main-color);font-family:OpenSans-SemiBold;}}}.user-premium-panel{margin:2.21rem 2.29rem 0 2.39rem !important;.title{margin-bottom:16px;font-size:24px;font-family:OpenSans-SemiBold;line-height:33px;}.permium-trial{display:flex;.mtable{flex:1;border-radius:16px;overflow:hidden;.t-title,.t-item{padding:0 24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.t-title{line-height:54px;height:54px;text-align:center;color:white;font-size:18px;font-weight:600;}.t-item{font-weight:500;font-size:16px;line-height:50px;height:50px;color:var(--main-color);span{color:var(--primary-color);}}.icon{height:50px;width:auto;vertical-align:top;margin-left:16px;display:inline-block;object-fit:none;}.space{margin-left:24px;}}.premium{background:#FFEEDA;margin-right:32px;.t-item:nth-child(2n + 1){background-color:rgba(255,255,255,0.45);}.t-title{background-color:var(--primary-color);}}.trial{background:#eeeeee;.t-item:nth-child(2n + 1){background-color:rgba(255,255,255,0.45);}.t-title{background-color:black;}}}}.input-Nickname{display:inline-block;min-width:27rem;margin-bottom:12px;height:38px;line-height:38px;border:1px solid #999999;font-family:OpenSans-Regular;outline:unset;border-radius:8px;padding-left:16px;font-size:10px;&::placeholder{color:#999999;}}.input-NickError{font-size:10px;color:#F37565;margin-left:12px;}"]))},18817:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return n(76435)}])}},function(e){e.O(0,[794,384,774,888,179],(function(){return t=18817,e(e.s=t);var t}));var t=e.O();_N_E=t}]);