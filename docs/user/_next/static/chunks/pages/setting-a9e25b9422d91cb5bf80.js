(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{97494:function(e,t,r){"use strict";var n=r(67294),i=r(29163),o=r(85893);t.Z=n.memo((0,i.ZP)((function(e){var t=e.src,r=void 0===t?"/images/logo_22x.png":t,n=e.className;return(0,o.jsx)("div",{className:n,children:(0,o.jsx)("img",{src:r})})})).withConfig({displayName:"Logo",componentId:"sc-lchex5-0"})(["display:inline-block;img{display:inline-block;height:2.5rem;width:auto;object-fit:contain;}span{font-size:2.45rem;font-weight:400;line-height:2.45rem;color:white;display:inline-block;}"]))},60649:function(e,t,r){"use strict";var n=r(94184),i=r.n(n),o=r(96486),s=r.n(o),a=r(11163),c=r(67294),l=r(76736),u=r(35766),m=r(14309),d=r(94983),f=r(29163),p=r(97494),h=r(85893),g=[{path:"/home",icon:"cru-fo-home",name:"Home"},{icon:"cru-fo-file",isParent:!0,name:"My Files"},{path:"/files",name:"Public"},{path:"/files/vault",name:"Vault"},{path:"/setting",icon:"cru-fo-settings",name:"Settings"},{path:"/share-earn",icon:"cru-fo-share-2",name:"Share-and-Earn"},{path:"/user",icon:"cru-fo-user",name:"Premium User"}];var b="15.7rem";t.Z=c.memo((0,f.ZP)((function(e){var t=(0,a.useRouter)(),r=(0,c.useCallback)((function(r,n){var i=n.index,o=g[i];o.path&&o.path!==e.path&&t.push(o.path)}),[e.path]),n=(0,c.useMemo)((function(){return s().findIndex(g,(function(e){return"/share-earn"===e.path}))}),[]),o=function(t){return e.path===t.path};return(0,h.jsxs)(l.Z.Pushable,{as:u.Z,className:i()(e.className,"basic"),children:[(0,h.jsxs)(l.Z,{as:u.Z,animation:"push",direction:"left",visible:!0,className:"basic",children:[(0,h.jsxs)(m.Z,{textAlign:"center",children:[(0,h.jsx)(m.Z.Row,{columns:1,className:"logoPanel",children:(0,h.jsx)(p.Z,{src:"/images/logo_12x.png"})}),(0,h.jsx)(m.Z.Row,{columns:1,children:(0,h.jsx)(d.Z,{fluid:!0,vertical:!0,borderless:!0,children:g.map((function(t,n){var i,s;return(0,h.jsx)(d.Z.Item,{className:(s=t,e.path.startsWith(s.path)&&s.isParent?"active2":""),position:"left",index:n,active:o(t),icon:(0,h.jsx)("span",{className:null!==(i=t.icon)&&void 0!==i?i:"cru-fo-file",style:{opacity:t.icon?1:0}}),name:t.name,onClick:r},"side_menu_".concat(n))}))})})]}),(0,h.jsx)("div",{className:"flex1"}),(0,h.jsx)("img",{className:"share_earn",onClick:function(){return r({},{index:n})},src:"/images/share_earn.png"})]}),(0,h.jsx)(l.Z.Pusher,{children:e.children})]})})).withConfig({displayName:"SideLayout",componentId:"sc-a6jhx7-0"})(["height:100vh;background:white;overflow-y:auto;.ui.sidebar{padding:unset !important;background:#F5F5F5;box-shadow:unset !important;width:",";min-height:821px;display:flex;flex-direction:column;align-items:center;.ui.grid{margin:unset !important;width:100%;}.logoPanel{padding:4.7rem 0;img{height:1.7rem;}}.menu{box-shadow:unset !important;border:unset !important;border-radius:unset !important;background:unset !important;.item{border-radius:0 !important;text-align:left;padding-left:2rem !important;font-weight:500;font-size:1.3rem;color:var(--secend-color);font-family:OpenSans-Regular;&.active{position:relative;color:var(--main-color);border-right:solid 0.2rem var(--primary-color);}&.active2{color:var(--main-color);border-right:unset;background-color:transparent;}span{float:left;margin-right:10px;}}}.share_earn{cursor:pointer;width:15rem;height:auto;margin-bottom:1rem;}}.pusher{width:calc(100vw - ",");height:100vh;min-height:821px;transform:translate3d(",",0,0) !important;overflow:auto !important;background:white;}"],b,b,b))},17082:function(e,t,r){"use strict";r.d(t,{vZ:function(){return g},hC:function(){return b},MH:function(){return v}});var n=r(92809),i=r(30266),o=r(80318),s=r(809),a=r.n(s),c=r(67294),l=r(58971),u=r.n(l),m=r(65058);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=r(21994).Cypher,h=new p(8),g=function(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){n.result&&t(n.result)},n.onerror=r,n.readAsArrayBuffer(e)}))};function b(e){try{var t=e&&e.trim();if(t){var r=t.split(" ");if(1===r.length&&r[0]){var n=r[0],i=window.atob(n),o=h.phraseFromSecret(i);if(o&&o.split(" ").length>=4)return{secret:n,seeds:o}}else if(r.length>=4){var s=h.secretFromPhrase(t);if(s&&s.split("-").length>=4)return{secret:window.btoa(s),seeds:t}}}return null}catch(a){return null}}function v(){var e=(0,c.useState)({}),t=e[0],r=e[1],n=(0,m.O)(),s=(0,o.Z)(n,2),l=s[0],d=s[1];(0,c.useEffect)((function(){var e=u().get("user:crypto");e&&r(e),d(!0)}),[]);var h=(0,c.useCallback)((function(e){r(e),u().set("user:crypto",e)}),[]),g=(0,c.useCallback)((0,i.Z)(a().mark((function e(){var t,r,n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new p(8),r=t.genMnemonics(),n=r.secret,i=r.mnemonics,o={secret:window.btoa(n),seeds:i},console.info("length:",n.length,o.secret.length),h(o),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),[]);return(0,c.useMemo)((function(){return f(f({},t),{},{generate:g,set:h,init:l})}),[t,h,l,g])}},8130:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var n=r(83789),i=r(80318),o=r(94184),s=r.n(o),a=r(93162),c=r.n(a),l=r(11163),u=r(67294),m=r(23499),d=r(35766),f=r(21004),p=r(49147),h=r(27416),g=r(29163),b=r(60954),v=r(92809),x=r(10219),y=r(345),j=r(60416),w=r(17082),N=r(85893),O=["alert","onSuccess","toggleOpen"];function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=u.memo((0,g.ZP)((function(e){var t=e.alert,r=e.onSuccess,n=e.toggleOpen,i=(0,x.Z)(e,O),o=(0,u.useState)(""),s=o[0],a=o[1],c=(0,u.useCallback)((function(e,t){var r=t.value;a(r)}),[]),l=(0,u.useCallback)((function(){var e=(0,w.hC)(s);e?(r(e),n(!1)):t.error("Please check input value")}),[s,t]),m=(0,u.useCallback)((function(){a(""),n(!1)}),[]);return(0,N.jsxs)(y.Z,k(k({closeIcon:(0,N.jsx)("span",{className:"close icon cru-fo-x"}),onClose:m},i),{},{children:[(0,N.jsx)(y.Z.Header,{content:"Input a new key"}),(0,N.jsxs)(y.Z.Content,{children:[(0,N.jsx)(j.Z,{fluid:!0,onChange:c}),(0,N.jsxs)("div",{className:"btns",children:[(0,N.jsx)(b.Z,{content:"Input",onClick:l}),(0,N.jsx)(b.Z,{content:"Cancel",onClick:function(){return n(!1)}})]})]})]}))})).withConfig({displayName:"ModalNewKey",componentId:"sc-1ramix5-0"})(["width:34.3rem !important;.header{height:3.93rem;font-size:1.3rem !important;padding:0 1.14rem !important;font-weight:600 !important;line-height:3.93rem !important;}.close.icon{top:0.5rem;right:0.6rem;color:#666666;}.content{padding:1rem !important;input{border:0.07rem solid #CCCCCC !important;border-radius:0.57rem !important;}.btns{padding-top:2.3rem;button{width:calc(50% - 0.5rem) !important;margin:unset;}button:first-child{margin-right:1rem;}}}"])),P=r(60649),S=r(18988),E=r(12752),_=r(20478),I=r(65058),F=r(96705);function A(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a=!0,o=e})),f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=u.memo((0,g.ZP)((function(e){var t=e.className,r=(0,m.$)().t,o=(0,w.MH)(),a=(0,l.useRouter)(),g=(0,u.useContext)(E.Il).alert,v=(0,I.O)(!1),x=(0,i.Z)(v,2),y=x[0],j=x[1],O=(0,I.O)(),Z=(0,i.Z)(O,2),k=Z[0],M=Z[1],D=(0,_.V)(),R=(0,F.WY)(),T=(0,u.useMemo)((function(){return R.member&&1===R.member.member_state?"Premium":"Trial"}),[R]),z="crust"===R.wallet,H=(0,F.Yg)(),U=(0,u.useRef)(null),L=(0,u.useCallback)((function(){U.current&&U.current.click()}),[U]),W=(0,u.useCallback)((function(e){try{var t=new FileReader,i=e.target.files;if(!i)return;if(t.readAsText(i[0],"UTF-8"),!/(.json)$/i.test(e.target.value))return g.error(r("File error"));t.onload=function(e){var t,i=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result),s={files:[]};if(Array.isArray(i))s.files=i;else{if(!i.files||!Array.isArray(i.files))return g.error(r("File content error"));s.secret=i.secret,s.files=i.files}if(o.secret&&s.secret&&s.secret!==o.secret)return g.error("Two secrets were found, and they are different.");if(s.secret){var a=(0,w.hC)(s.secret);a&&o.set(a)}var c,l=[],u={},m=A(s.files);try{for(m.s();!(c=m.n()).done;){var d=c.value;d.Hash&&d.Name&&d.UpEndpoint&&d.PinEndpoint&&(l.push(d),u[d.Hash]=!0)}}catch(p){m.e(p)}finally{m.f()}var f=H.files.filter((function(e){return!u[e.Hash]}));H.setFiles([].concat(l,(0,n.Z)(f))),g.alert({msg:r("Import Success"),type:"success"})}}catch(e){g.alert({msg:r("File content error"),type:"error"})}}),[H,o.set,g,r]),Y=(0,u.useCallback)((function(){var e={files:H.files,secret:o.secret},t=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});c().saveAs(t,"backup.json")}),[H,o]);return(0,N.jsx)(P.Z,{path:"/setting",children:(0,N.jsxs)(d.Z,{basic:!0,className:t,children:[(0,N.jsx)("input",{onChange:W,ref:U,style:{display:"none"},type:"file"}),(0,N.jsx)(S.Z,{}),y&&(0,N.jsx)(C,{alert:g,size:"tiny",open:!0,toggleOpen:j,onSuccess:o.set}),(0,N.jsxs)(d.Z,{basic:!0,className:"mcontent",children:[(0,N.jsxs)(d.Z,{basic:!0,className:"mcard",children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:r("User Profile")}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Web3 Identity Logged-in:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:R.account})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Logged-in Wallet:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:F.w3[R.wallet]})]}),z&&R.nickName&&(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Nick Name:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:R.nickName})]}),(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("User Type:")," "),z&&(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:T}),!z&&(0,N.jsx)("a",{onClick:function(){return a.push("/user")},rel:"noreferrer",children:"Get a Premium"})]})]}),(0,N.jsxs)(d.Z,{basic:!0,className:"mcard",children:[(0,N.jsx)("div",{className:"title font-sans-semibold",children:r("User Data Management")}),(0,N.jsx)("div",{className:"text font-sans-regular",children:"".concat(r("Your user data (including three File Lists and one File Encryption Key) are cached on your local devices. If you want to migrate your user data to a new device, use Export & Import function.")," ")}),(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(p.Z,{active:k,onClick:function(){return M()},children:(0,N.jsxs)("div",{className:"title font-sans-semibold",children:[r("File Encryption"),(0,N.jsx)("span",{className:s()("icon",k?"cru-fo-chevron-up":"cru-fo-chevron-down")})]})}),(0,N.jsxs)(h.Z,{active:k,className:"no-padding",children:[(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Your File Encryption Key:")," "),o.secret&&(0,N.jsxs)("span",{className:"bold-text font-sans-semibold",children:[o.secret,(0,N.jsx)("span",{className:"icon cru-fo-copy",onClick:function(){return D(o.secret)}})]}),!o.secret&&(0,N.jsx)("a",{onClick:o.generate,children:"Generate a New"})]}),o.seeds&&(0,N.jsxs)("div",{className:"text font-sans-regular",children:["".concat(r("Seed Phrase:")," "),(0,N.jsx)("span",{className:"bold-text font-sans-semibold",children:o.seeds})]})]})]}),(0,N.jsxs)("div",{className:"btns",children:[(0,N.jsx)(b.Z,{content:r("Export"),onClick:Y}),(0,N.jsx)(b.Z,{content:r("Import"),onClick:L})]})]})]})]})})})).withConfig({displayName:"setting",componentId:"sc-1rkrrxr-0"})(["padding:unset !important;.mcontent{margin:unset !important;padding:0 0 3rem 0 !important;overflow:auto;}.mcard{padding:1.71rem !important;box-shadow:0 0.71rem 1.71rem 0 rgba(0,0,0,0.06) !important;border-radius:1.14rem !important;border:0.07rem solid #EEEEEE !important;margin:2.21rem 2.29rem 0 2.39rem !important;.title{font-size:1.3rem !important;font-weight:600;color:var(--main-color);padding-bottom:1.14rem;.cru-fo{margin-right:0.8rem;}}.text{font-size:1rem;color:var(--secend-color);line-height:1.57rem;}.icon{margin-left:1rem;font-size:1.428571rem;position:relative;top:3px;cursor:pointer;}.bold-text{color:var(--main-color);}a{text-decoration:underline;line-height:1.2rem;cursor:pointer;}.btns{margin-top:1.7rem;button:first-child{margin-right:1rem;}}}"]))},63782:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return r(8130)}])}},function(e){e.O(0,[794,615,545,774,888,179],(function(){return t=63782,e(e.s=t);var t}));var t=e.O();_N_E=t}]);